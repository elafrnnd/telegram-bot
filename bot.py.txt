from telegram import Update, Bot
from telegram.ext import (
    ApplicationBuilder,
    ContextTypes,
    MessageHandler,
    filters,
)
import os

# === CONFIGURATION ===
BOT_TOKEN = '8043955129:AAGiatxpVMhkKrjUV_Jj79K5e7FRyAtJK2I'
SOURCE_USER_ID = 7635291775  # Replace with the Telegram user ID to forward from
TARGET_GROUPS = [-1001111111111, -1002222222222]  # Replace with your group chat IDs

# === MESSAGE FORWARDING HANDLER ===
async def forward_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # Only forward messages from the specific user
    if update.effective_user and update.effective_user.id == SOURCE_USER_ID:
        for group_id in TARGET_GROUPS:
            try:
                await context.bot.copy_message(
                    chat_id=group_id,
                    from_chat_id=update.effective_chat.id,
                    message_id=update.message.message_id
                )
                print(f"‚úÖ Forwarded message to {group_id}")
            except Exception as e:
                print(f"‚ùå Error sending to {group_id}: {e}")

# === MAIN FUNCTION ===
async def main():
    app = ApplicationBuilder().token(BOT_TOKEN).build()

    app.add_handler(MessageHandler(filters.ALL, forward_handler))

    print("üöÄ Bot is running and forwarding messages from user", SOURCE_USER_ID)
    await app.run_polling()

# === START SCRIPT ===
if __name__ == '__main__':
    import asyncio
    asyncio.run(main())
